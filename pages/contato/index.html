<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SeekBR — Home</title>
  <link rel="stylesheet" href="/style.css">
</head>

<body>
  <div class="wrap">
    <div id="site-header"></div>
    <script src="/script.js" defer></script>

    <main class="grid">
      <section class="card">
        <form id="contactForm" novalidate>
          <div class="row">
            <label>
              Nome
              <input name="name" type="text" placeholder="Seu nome" required minlength="2" />
            </label>

            <label>
              E-mail
              <input name="email" type="email" placeholder="seuemail@exemplo.com" required />
            </label>
          </div>

          <div class="row">
            <label>
              Assunto
              <select name="subject" required>
                <option value="" selected disabled>Selecione…</option>
                <option>Dúvida</option>
                <option>Orçamento</option>
                <option>Parceria</option>
                <option>Outro</option>
              </select>
            </label>

            <label>
              Telefone (opcional)
              <input name="phone" type="tel" placeholder="(11) 99999-9999" />
            </label>
          </div>

          <label>
            Mensagem
            <textarea name="message" placeholder="Escreva sua mensagem…" required minlength="10"></textarea>
          </label>
          <div class="hint">Dica: seja o mais específico possível pra eu te ajudar rápido.</div>

          <div class="actions">
            <button id="sendBtn" type="submit">Enviar</button>
            <span id="status" class="status">Nada enviado ainda.</span>
          </div>
        </form>
      </section>

      <aside class="card info">
        <h2>Outras formas de contato</h2>
        <ul>
          <li><strong>Email:</strong> contato@seekbr.site</li>
          <li><strong>Discord:</strong> @seekbr</li>
          <li><strong>Horário:</strong> seg–sex, 10h–18h</li>
          <li><strong>Local:</strong> Brasil</li>
        </ul>

        <!-- ✅ IDs pra atualizar automaticamente -->
        <div id="servicePill" class="pill" title="Status de atendimento">
          <span id="serviceDot" class="dot offline"></span>
          <span id="serviceText">Offline</span>
        </div>
      </aside>
    </main>

    <footer>
      © SeekBR <span id="year"></span>
    </footer>
  </div>

  <script>
    // Só um exemplo: valida e "simula" envio sem backend.
    const form = document.getElementById("contactForm");
    const statusEl = document.getElementById("status");
    const btn = document.getElementById("sendBtn");
    document.getElementById("year").textContent = new Date().getFullYear();

    function setStatus(text, kind) {
      statusEl.textContent = text;
      statusEl.classList.remove("ok", "err");
      if (kind) statusEl.classList.add(kind);
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      if (!form.checkValidity()) {
        setStatus("Preencha os campos obrigatórios corretamente.", "err");
        form.reportValidity();
        return;
      }

      btn.disabled = true;
      setStatus("Enviando…");

      // Simulação de envio
      await new Promise(r => setTimeout(r, 700));

      // Pegando os dados (exemplo)
      const data = Object.fromEntries(new FormData(form).entries());
      console.log("Dados do formulário:", data);

      setStatus("Mensagem enviada! ✅", "ok");
      form.reset();
      btn.disabled = false;
    });

    // ============================================================
    // ✅ Status Online/Offline automático (seg–sex 10:00–18:00 BRT)
    // ============================================================

    const servicePill = document.getElementById("servicePill");
    const serviceDot = document.getElementById("serviceDot");
    const serviceText = document.getElementById("serviceText");

    // Pega dia/hora no fuso de Sao Paulo, mesmo se o visitante for de outro país
    function getBrazilNowParts() {
      const parts = new Intl.DateTimeFormat("pt-BR", {
        timeZone: "America/Sao_Paulo",
        weekday: "short",
        hour: "2-digit",
        minute: "2-digit",
        hour12: false
      }).formatToParts(new Date());

      const map = {};
      for (const p of parts) map[p.type] = p.value;

      // weekday em pt-BR costuma vir como: "seg.", "ter.", "qua."...
      const weekday = (map.weekday || "").toLowerCase();
      const hour = Number(map.hour);
      const minute = Number(map.minute);

      return { weekday, hour, minute };
    }

    function isBusinessOpen({ weekday, hour, minute }) {
      // Domingo: "dom.", Sábado: "sáb." (pode variar um pouco por navegador)
      const isWeekend = weekday.startsWith("sáb") || weekday.startsWith("sab") || weekday.startsWith("dom");
      if (isWeekend) return false;

      const nowMinutes = hour * 60 + minute;
      const start = 10 * 60; // 10:00
      const end = 18 * 60;   // 18:00

      return nowMinutes >= start && nowMinutes < end;
    }

    function updateServiceStatus() {
      const now = getBrazilNowParts();
      const online = isBusinessOpen(now);

      if (online) {
        serviceText.textContent = "Online";
        servicePill.title = "Status de atendimento: Online (seg–sex, 10h–18h)";
        serviceDot.classList.remove("offline");
        serviceDot.classList.add("online");
      } else {
        serviceText.textContent = "Offline";
        servicePill.title = "Status de atendimento: Offline (seg–sex, 10h–18h)";
        serviceDot.classList.remove("online");
        serviceDot.classList.add("offline");
      }
    }

    // Roda uma vez ao carregar e depois atualiza a cada 30s
    updateServiceStatus();
    setInterval(updateServiceStatus, 30_000);
  </script>
</body>
</html>
